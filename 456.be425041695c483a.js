"use strict";(self.webpackChunkgeneric=self.webpackChunkgeneric||[]).push([[456],{456:(pe,U,i)=>{i.r(U),i.d(U,{PacienteModule:()=>me});var I=i(9808),P=i(1083),l=i(3075),x=i(5439),J=i(4252),p=(()=>{return(a=p||(p={}))[a.Masculino=0]="Masculino",a[a.Feminino=1]="Feminino",a[a["N\xe3o Bin\xe1rio"]=2]="N\xe3o Bin\xe1rio",a[a.Agenero=3]="Agenero",a[a.Transg\u00eanero=4]="Transg\xeanero",a[a["N\xe3o Informar"]=5]="N\xe3o Informar",p;var a})(),R=i(7054);class g extends R.e{constructor(s,o,t,r,n,d,u,c,h,F,f,y,E,T,ue,ce){super(),this.nome=s,this.nomeSocial=o,this.genero=t,this.dtNascimento=r,this.endereco=n,this.complemento=d,this.numero=u,this.bairro=c,this.cidade=h,this.uf=F,this.cep=f,this.rg=y,this.cpf=E,this.telefone=T,this.idade=ue,this.acompanhantes=ce}static fromJson(s){return Object.assign(new g,s)}}var C=i(7803),m=i(6884),A=i(4806),M=i(9007),Y=i(7161),e=i(5e3),B=i(3026);let D=(()=>{class a extends B.e{constructor(o){super("paciente",o,g.fromJson),this.injector=o}}return a.\u0275fac=function(o){return new(o||a)(e.LFG(e.zs3))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var $=i(9380),Q=i(2843),j=i(4482),q=i(5403),k=i(4671),V=i(5963),z=i(8421);function O(a=1/0){let s;s=a&&"object"==typeof a?a:{count:a};const{count:o=1/0,delay:t,resetOnSuccess:r=!1}=s;return o<=0?k.y:(0,j.e)((n,d)=>{let c,u=0;const h=()=>{let F=!1;c=n.subscribe((0,q.x)(d,f=>{r&&(u=0),d.next(f)},void 0,f=>{if(u++<o){const y=()=>{c?(c.unsubscribe(),c=null,h()):F=!0};if(null!=t){const E="number"==typeof t?(0,V.H)(t):(0,z.Xf)(t(f,u)),T=(0,q.x)(d,()=>{T.unsubscribe(),y()},()=>{d.complete()});E.subscribe(T)}else y()}else d.error(f)})),F&&(c.unsubscribe(),c=null,h())};h()})}var S=i(262),G=i(2340),W=i(520);let H=(()=>{class a{constructor(o){this.http=o,this.urlBase=G.N.urlBaseviaCep}getByCep(o){return this.http.get(`${this.urlBase}${o}/json/`).pipe(O(1),(0,S.K)(this.handleError))}getByCidadeEstado(o,t){return this.http.get(`${this.urlBase}${t}/${o}/json/`).pipe(O(1),(0,S.K)(this.handleError))}handleError(o){let t="";return t=o.error instanceof ErrorEvent?`Error: ${o.error.message}`:`Error Code: ${o.status}\nMessage: ${o.message}`,console.log(t),(0,Q._)(()=>t)}}return a.\u0275fac=function(o){return new(o||a)(e.LFG(W.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var v=i(7093),b=i(3489),K=i(7531),X=i(9772),w=i(4107),_=i(508),N=i(6856),L=i(7423);function ee(a,s){if(1&a&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&a){const o=s.$implicit;e.Q6J("value",o.key),e.xp6(1),e.Oqu(o.value)}}let Z=(()=>{class a extends Y.e{constructor(o,t,r,n){super(o,new g,t,g.fromJson),this.injector=o,this.service=t,this.serviceAcompanhante=r,this.viaCep=n,this.Generos=Object.keys(p).filter(d=>!1===isNaN(Number(d))).map(d=>({key:Number(d),value:p[d]})),this.columnDef=[{columnField:"nome",columnName:"Nome"},{columnField:"telefone",columnName:"Telefone"},{columnField:"parentesco",columnName:"Parentesco"}]}getCurrentAction(o){}actionsForSuccess(o){this.queryString=`pacienteId==${o.id}`}actionsForError(o){}actionsForCreate(o){return o}actionsForUpdate(o){return this.queryString=`pacienteId==${o.id}`,o}formInit(o){this.queryString=`pacienteId==${o.id}`}formClose(o){}criaForm(o){this.itemForm=this.fb.group({nome:[(0,m._)(o,t=>t.nome,""),[l.kI.required,l.kI.maxLength(300)]],nomeSocial:[(0,m._)(o,t=>t.nomeSocial,""),[l.kI.required,l.kI.maxLength(300)]],genero:[(0,m._)(o,t=>t.genero),[l.kI.required]],endereco:[(0,m._)(o,t=>t.endereco,""),[l.kI.required,l.kI.maxLength(250)]],numero:[(0,m._)(o,t=>t.numero,""),[l.kI.required,l.kI.maxLength(10)]],complemento:[(0,m._)(o,t=>t.complemento,""),[l.kI.maxLength(300)]],bairro:[(0,m._)(o,t=>t.bairro,""),[l.kI.required]],cidade:[(0,m._)(o,t=>t.cidade,""),[l.kI.required]],cep:[(0,m._)(o,t=>t.cep,""),[l.kI.required,l.kI.maxLength(8)]],uf:[(0,m._)(o,t=>t.uf,""),[l.kI.required]],rg:[(0,m._)(o,t=>t.rg,""),[]],cpf:[(0,m._)(o,t=>t.cpf,""),[l.kI.required]],dtNascimento:[(0,m._)(o,t=>t.dtNascimento,""),[l.kI.required]],telefone:[(0,m._)(o,t=>t.telefone,""),[l.kI.required]],idade:{value:o.idade||"0",disabled:!0},status:(0,m._)(o,t=>t.status,J.A.Ativo),id:(0,m._)(o,t=>t.id,"")})}buscaCep(o){if(13===o.keyCode){this.loader.open();let t=this.itemForm.get("cep");this.viaCep.getByCep(null==t?void 0:t.value).subscribe({next:r=>{if("true"===r.erro)return this.notify.error({message:"CEP n\xe3o encontrado!",title:"Erro"}),void this.loader.close();Object.assign(this.model,this.jsonDataToResourceFn(this.itemForm.getRawValue())),this.model.bairro=r.bairro,this.model.cidade=r.localidade,this.model.endereco=r.logradouro,this.model.uf=r.uf,this.itemForm.patchValue(this.model,{emitEvent:!0}),this.loader.close()},error:r=>{var n;(null===(n=null==r?void 0:r.error)||void 0===n?void 0:n.length)>0?this.notify.error({message:r.error[0].errorMessage?r.error[0].errorMessage:r.error,title:"Erro"}):this.notify.error({message:"Ocorreu um erro ao adicionar o registro, tente novamente!",title:"Erro",icon:"error_outline"}),this.loader.close()}})}}validaPermissaoAcompanhante(){return(0,A.le)(this.model.id)||""===this.model.id}onChangeDate(o){var r=x(o.targetElement.value,"DD-MM-YYYY").toDate(),n=x().toDate();r>n&&this.itemForm.patchValue({idade:"0"});var u,d=n.getFullYear()-r.getFullYear();r.setFullYear(r.getFullYear()+d),n<r&&0!=d&&(d--,r.setFullYear(r.getFullYear()+d)),u=r.getFullYear()==n.getFullYear()?n.getMonth()-r.getMonth():12-r.getMonth()+n.getMonth(),r.setMonth(r.getMonth()+u),n<r&&0!=u&&(u--,r.setMonth(r.getMonth()+u)),r.setMonth(r.getMonth()+u),new Date(n.valueOf()-r.valueOf()).getDay(),this.itemForm.patchValue({idade:`${d} ano${d>1?"s":""}, ${u} ${u>1?"meses":"m\xeas"}`})}Update(o){(0,A.le)(o.id)||this.dialog.open(M.c,{data:{id:o.id,payload:o},disableClose:!0,panelClass:"dialog-container"}).afterClosed().subscribe(r=>{this.table.carregaDados()})}Delete(o){this.serviceAcompanhante.Delete(o).subscribe({next:t=>{this.notify.sucess({message:"Apagado com sucesso.",title:"Registro",icon:"done"}),this.table.carregaDados()},error:t=>{var r;(null===(r=null==t?void 0:t.error)||void 0===r?void 0:r.length)>0?this.notify.error({message:t.error[0].errorMessage?t.error[0].errorMessage:t.error,title:"Erro",icon:"error_outline"}):this.notify.error({message:"Ocorreu um erro ao adicionar o registro, tente novamente!",title:"Erro",icon:"error_outline"})}})}novoRegistro(){this.dialog.open(M.c,{disableClose:!0,panelClass:"dialog-container",data:{pacienteId:this.model.id}}).afterClosed().subscribe(t=>{this.table.carregaDados()})}}return a.\u0275fac=function(o){return new(o||a)(e.Y36(e.zs3),e.Y36(D),e.Y36($.W),e.Y36(H))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-cadastro-paciente"]],viewQuery:function(o,t){if(1&o&&e.Gf(C.a,5),2&o){let r;e.iGM(r=e.CRH())&&(t.table=r.first)}},features:[e.qOj],decls:116,vars:25,consts:[[1,"main-content",3,"formGroup"],[1,"container-fluid"],[1,"card"],[1,"card-header","card-header-danger"],[1,"card-title"],[1,"card-body"],["fxLayout","row","fxLayout.lt-sm","column","fxLayoutGap","10px","fxFlexFill",""],["fxFlex","70"],[1,"full-width"],["matInput","","formControlName","nome","matTooltip","Nome do Paci\xeante.","placeholder","Nome","autofocus",""],["fxFlex","30"],["matInput","","formControlName","nomeSocial","matTooltip","Nome Social do Paci\xeante.","placeholder","Nome Social"],["fxFlex","15"],["placeholder","Genero","matTooltip","Como se identifica","formControlName","genero"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","dtNascimento","matTooltip","Data de nascimento","placeholder","Nascimento",3,"matDatepicker","dateChange"],["matSuffix","",3,"for"],["picker",""],["matInput","","formControlName","idade","placeholder","Idade"],["fxFlex","20"],["matInput","","formControlName","rg","matTooltip","N\xfamero do RG","placeholder","RG"],["matInput","","formControlName","cpf","matTooltip","N\xfamero do CPF","placeholder","CPF"],["matInput","","formControlName","telefone","matTooltip","N\xfamero do Telefone de contato","placeholder","Telefone"],["matInput","","formControlName","cep","placeholder","CEP","type","text","soNumeros","",3,"keyup"],["fxFlex","55"],["matInput","","formControlName","endereco","matTooltip","Endere\xe7o da resid\xeancia","placeholder","Endere\xe7o"],["matInput","","formControlName","complemento","matTooltip","Complemento do endere\xe7o","placeholder","Complemento"],["fxFlex","10"],["matInput","","formControlName","numero","matTooltip","N\xfamero da casa ou apartamento","placeholder","Numero"],["fxFlex","45"],["matInput","","formControlName","bairro","matTooltip","Bairro da resid\xeancia do Paci\xeante","placeholder","Bairro","type","text"],["fxFlex","40"],["matInput","","formControlName","cidade","placeholder","Cidade","type","text"],["fxFlex","5"],["matInput","","formControlName","uf","placeholder","UF","type","text"],["fxFlex","100"],["matInput","","placeholder","Observa\xe7\xf5es"],[1,"card-category"],["type","button","mat-raised-button","",1,"btn","btn-success","pull-right",3,"disabled","click"],[3,"service","columnDef","query","update","delete"],["fxLayout","row","fxlayoutgap","10px grid","fxLayout.lt-sm","row","fxLayoutAlign","flex-start"],["fxFlex","50","fxLayoutAlign","start center"],["type","button","id","btSalvar","mat-raised-button","",1,"btn","btn-success","pull-right",3,"disabled","click"],["fxFlex","50","fxLayoutAlign","end center"],["type","button","id","btCancelar","mat-raised-button","",1,"btn","btn-danger","pull-right",3,"click"],[3,"value"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e._uU(5),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"mat-form-field",8),e._UZ(10,"input",9),e.TgZ(11,"mat-error"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",10)(14,"mat-form-field",8),e._UZ(15,"input",11),e.TgZ(16,"mat-error"),e._uU(17),e.qZA()()()(),e.TgZ(18,"div",6)(19,"div",12)(20,"mat-form-field",8)(21,"mat-select",13)(22,"mat-option"),e._uU(23,"--"),e.qZA(),e.YNc(24,ee,2,2,"mat-option",14),e.qZA(),e.TgZ(25,"mat-error"),e._uU(26),e.qZA()()(),e.TgZ(27,"div",12)(28,"mat-form-field",8)(29,"input",15),e.NdJ("dateChange",function(n){return t.onChangeDate(n)}),e.qZA(),e._UZ(30,"mat-datepicker-toggle",16)(31,"mat-datepicker",null,17),e.TgZ(33,"mat-error"),e._uU(34),e.qZA()()(),e.TgZ(35,"div",12)(36,"mat-form-field",8),e._UZ(37,"input",18),e.TgZ(38,"mat-error"),e._uU(39),e.qZA()()(),e.TgZ(40,"div",19)(41,"mat-form-field",8),e._UZ(42,"input",20),e.TgZ(43,"mat-error"),e._uU(44),e.qZA()()(),e.TgZ(45,"div",12)(46,"mat-form-field",8),e._UZ(47,"input",21),e.TgZ(48,"mat-error"),e._uU(49),e.qZA()()(),e.TgZ(50,"div",12)(51,"mat-form-field",8),e._UZ(52,"input",22),e.TgZ(53,"mat-error"),e._uU(54),e.qZA()()()(),e.TgZ(55,"div",6)(56,"div",12)(57,"mat-form-field",8)(58,"input",23),e.NdJ("keyup",function(n){return t.buscaCep(n)}),e.qZA(),e.TgZ(59,"mat-error"),e._uU(60),e.qZA()()(),e.TgZ(61,"div",24)(62,"mat-form-field",8),e._UZ(63,"input",25),e.TgZ(64,"mat-error"),e._uU(65),e.qZA()()(),e.TgZ(66,"div",10)(67,"mat-form-field",8),e._UZ(68,"input",26),e.TgZ(69,"mat-error"),e._uU(70),e.qZA()()()(),e.TgZ(71,"div",6)(72,"div",27)(73,"mat-form-field",8),e._UZ(74,"input",28),e.TgZ(75,"mat-error"),e._uU(76),e.qZA()()(),e.TgZ(77,"div",29)(78,"mat-form-field",8),e._UZ(79,"input",30),e.TgZ(80,"mat-error"),e._uU(81),e.qZA()()(),e.TgZ(82,"div",31)(83,"mat-form-field",8),e._UZ(84,"input",32),e.TgZ(85,"mat-error"),e._uU(86),e.qZA()()(),e.TgZ(87,"div",33)(88,"mat-form-field",8),e._UZ(89,"input",34),e.TgZ(90,"mat-error"),e._uU(91),e.qZA()()()(),e.TgZ(92,"div",6)(93,"div",35)(94,"mat-form-field",8),e._UZ(95,"textarea",36),e.qZA()()(),e.TgZ(96,"div",6)(97,"div",35)(98,"div",2)(99,"div",3)(100,"h4",4),e._uU(101,"Acompanhantes"),e.qZA(),e.TgZ(102,"p",37),e._uU(103,"Obrigat\xf3rio para menores de idade"),e.qZA()(),e.TgZ(104,"div",5)(105,"button",38),e.NdJ("click",function(){return t.novoRegistro()}),e._uU(106,"Novo"),e.qZA(),e._uU(107," \xa0\xa0\xa0 "),e.TgZ(108,"apptable",39),e.NdJ("update",function(n){return t.Update(n)})("delete",function(n){return t.Delete(n)}),e.qZA()()()()(),e.TgZ(109,"div",40)(110,"div",41)(111,"button",42),e.NdJ("click",function(){return t.submit()}),e._uU(112,"Salvar"),e.qZA()(),e.TgZ(113,"div",43)(114,"button",44),e.NdJ("click",function(){return t.cancelar()}),e._uU(115,"Cancelar"),e.qZA()()()()()()()),2&o){const r=e.MAs(32);e.Q6J("formGroup",t.itemForm),e.xp6(5),e.hij("",t.pageTitle," Paciente"),e.xp6(7),e.Oqu(t.getErros(t.itemForm.get("nome"))),e.xp6(5),e.Oqu(t.getErros(t.itemForm.get("nomeSocial"))),e.xp6(7),e.Q6J("ngForOf",t.Generos),e.xp6(2),e.Oqu(t.getErros(t.itemForm.get("genero"))),e.xp6(3),e.Q6J("matDatepicker",r),e.xp6(1),e.Q6J("for",r),e.xp6(4),e.Oqu(t.getErros(t.itemForm.get("dtNascimento"))),e.xp6(5),e.Oqu(t.getErros(t.itemForm.get("idade"))),e.xp6(5),e.Oqu(t.getErros(t.itemForm.get("rg"))),e.xp6(5),e.Oqu(t.getErros(t.itemForm.get("cpf"))),e.xp6(5),e.Oqu(t.getErros(t.itemForm.get("telefone"))),e.xp6(6),e.Oqu(t.getErros(t.itemForm.get("cep"))),e.xp6(5),e.Oqu(t.getErros(t.itemForm.get("endereco"))),e.xp6(5),e.Oqu(t.getErros(t.itemForm.get("complemento"))),e.xp6(6),e.Oqu(t.getErros(t.itemForm.get("numero"))),e.xp6(5),e.Oqu(t.getErros(t.itemForm.get("bairro"))),e.xp6(5),e.Oqu(t.getErros(t.itemForm.get("cidade"))),e.xp6(5),e.Oqu(t.getErros(t.itemForm.get("uf"))),e.xp6(14),e.Q6J("disabled",t.validaPermissaoAcompanhante()),e.xp6(3),e.Q6J("service",t.serviceAcompanhante)("columnDef",t.columnDef)("query",t.queryString),e.xp6(3),e.Q6J("disabled",t.validaPermissao())}},directives:[l.JL,l.sg,v.xw,v.SQ,v.s9,v.yH,b.KE,K.Nt,l.Fj,l.JJ,l.u,X.gM,b.TO,w.gD,_.ey,I.sg,N.hl,N.nW,b.R9,N.Mq,L.lW,C.a,v.Wh],styles:[""]}),a})();var te=i(4865),oe=i(8966),re=i(4600);const ae=[{path:"",component:(()=>{class a extends te.d{constructor(o,t,r){super(),this.service=o,this.dialog=t,this.notify=r,this.columnDef=[{columnField:"nome",columnName:"Nome"},{columnField:"genero",columnName:"Genero",columnValue:n=>p[n]},{columnField:"idade",columnName:"Idade"},{columnField:"endereco",columnName:"Endere\xe7o"},{columnField:"numero",columnName:"Numero"}]}Update(o){(0,A.le)(o.id)||this.dialog.open(Z,{data:{id:o.id,payload:o},disableClose:!0,panelClass:"dialog-container"}).afterClosed().subscribe(r=>{this.table.carregaDados()})}Delete(o){this.service.Delete(o).subscribe({next:t=>{this.notify.sucess({message:"Apagado com sucesso.",title:"Registro",icon:"done"}),this.table.carregaDados()},error:t=>{var r;(null===(r=null==t?void 0:t.error)||void 0===r?void 0:r.length)>0?this.notify.error({message:t.error[0].errorMessage?t.error[0].errorMessage:t.error,title:"Erro",icon:"error_outline"}):this.notify.error({message:"Ocorreu um erro ao adicionar o registro, tente novamente!",title:"Erro",icon:"error_outline"})}})}novoRegistro(){this.dialog.open(Z,{data:{},disableClose:!0,panelClass:"dialog-container",width:"1000px"}).afterClosed().subscribe(t=>{this.table.carregaDados()})}validaPermissao(){}}return a.\u0275fac=function(o){return new(o||a)(e.Y36(D),e.Y36(oe.uw),e.Y36(re.c))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-lista-paciente"]],viewQuery:function(o,t){if(1&o&&e.Gf(C.a,5),2&o){let r;e.iGM(r=e.CRH())&&(t.table=r.first)}},features:[e.qOj],decls:13,vars:3,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-danger"],[1,"card-title"],[1,"card-body"],["type","button","mat-raised-button","",1,"btn","btn-success","pull-right",3,"disabled","click"],[3,"service","columnDef","update","delete"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),e._uU(7,"Lista de Paciente"),e.qZA()(),e.TgZ(8,"div",7)(9,"button",8),e.NdJ("click",function(){return t.novoRegistro()}),e._uU(10,"Novo"),e.qZA(),e._uU(11," \xa0\xa0\xa0 "),e.TgZ(12,"apptable",9),e.NdJ("update",function(n){return t.Update(n)})("delete",function(n){return t.Delete(n)}),e.qZA()()()()()()()),2&o&&(e.xp6(9),e.Q6J("disabled",t.validaPermissao()),e.xp6(3),e.Q6J("service",t.service)("columnDef",t.columnDef))},directives:[L.lW,C.a],styles:[""]}),a})()},{path:"editar/:id",component:Z},{path:"cadastro",component:Z}];let ie=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[P.Bz.forChild(ae)],P.Bz]}),a})();var ne=i(6546),se=i(9650),le=i(9764),de=i(4466);let me=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[],imports:[[I.ez,l.UX,ne.q,de.m,se.K,le.o9,ie]]}),a})()}}]);